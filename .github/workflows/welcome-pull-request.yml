name: Welcome First PR

on:
  pull_request:
    types: [opened]

permissions:
  pull-requests: write # Bắt buộc để comment

jobs:
  welcome:
    runs-on: ubuntu-latest
    steps:
      # --- CÁCH DEMO: Dùng script này để ép buộc comment ---
      - name: Force Welcome Comment (Demo Mode)
        uses: actions/github-script@v6
        with:
          script: |
            // Lấy thông tin người tạo PR
            const user = context.payload.pull_request.user.login;
            
            // Nội dung tin nhắn (giả lập tin nhắn của first-interaction)
            const message = ` Xin chào @${user}! Cảm ơn bạn đã gửi Pull Request đầu tiên cho dự án.`;

            // Gọi API tạo comment
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: message
            });